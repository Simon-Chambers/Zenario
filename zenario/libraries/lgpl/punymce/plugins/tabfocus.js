(function(e){function f(a,b){var c,d;c=b.parentNode;(d=b.nextSibling)?c.insertBefore(a,d):c.appendChild(a);return a}e.plugins.TabFocus=function(a){var b=e.Event,c=e.DOM;a.onInit.add(function(){var d;d=f(c.create("a",{href:"#"}),c.get(a.settings.id+"_c"));b.add(d,"focus",function(b){a.getWin().focus()});b.add(a.getDoc(),"keydown",function(a){if(9==a.keyCode)return b.cancel(a)});b.add(a.getDoc(),"keydown",function(b){9==b.keyCode&&(window.focus(),c.get(a.settings.tabfocus_id).focus())})})}})(punymce);
