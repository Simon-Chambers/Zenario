tinymce.PluginManager.add("tabfocus",function(e){function f(a){function f(a){function b(a){return"BODY"===a.nodeName||"hidden"!=a.type&&"none"!=a.style.display&&"hidden"!=a.style.visibility&&b(a.parentNode)}function k(a){return!(a.tabIndex||"INPUT"==a.nodeName||"TEXTAREA"==a.nodeName)&&"-1"!=a.getAttribute("tabindex")&&b(a)}c=g.select(":input:enabled,*[tabindex]:not(iframe)");l(c,function(a,b){if(a.id==e.id)return h=b,!1});if(0<a)for(d=h+1;d<c.length;d++){if(k(c[d]))return c[d]}else for(d=h-1;0<=
d;d--)if(k(c[d]))return c[d];return null}var h,c,b,d;!(9!==a.keyCode||a.ctrlKey||a.altKey||a.metaKey)&&(b=m(e.getParam("tab_focus",e.getParam("tabfocus_elements",":prev,:next"))),1==b.length&&(b[1]=b[0],b[0]=":prev"),c=a.shiftKey?":prev"==b[0]?f(-1):g.get(b[0]):":next"==b[1]?f(1):g.get(b[1]))&&(b=tinymce.get(c.id||c.name),c.id&&b?b.focus():window.setTimeout(function(){tinymce.Env.webkit||window.focus();c.focus()},10),a.preventDefault())}var g=tinymce.DOM,l=tinymce.each,m=tinymce.explode;e.on("init",
function(){e.inline&&tinymce.DOM.setAttrib(e.getBody(),"tabIndex",null)});e.on("keyup",function(a){9!==a.keyCode||a.ctrlKey||a.altKey||a.metaKey||a.preventDefault()});if(tinymce.Env.gecko)e.on("keypress keydown",f);else e.on("keydown",f)});
