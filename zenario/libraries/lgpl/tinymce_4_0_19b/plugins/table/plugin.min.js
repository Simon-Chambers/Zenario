(function(L,F){function M(r,x){for(var h,e=[],f=0;f<r.length;++f){if(!(h=J[r[f]]))a:{h=L;for(var q=r[f].split(/[.\/]/),w=0;w<q.length;++w){if(!h[q[w]]){h=void 0;break a}h=h[q[w]]}}if(!h)throw"module definition dependecy not found: "+r[f];e.push(h)}x.apply(null,e)}function G(r,x,h){if("string"!==typeof r)throw"invalid module definition, module id must be defined and be a string";if(x===F)throw"invalid module definition, dependencies must be specified";if(h===F)throw"invalid module definition, definition function must be specified";
M(x,function(){J[r]=h.apply(null,arguments)})}var J={};G("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env"],function(r,x){function h(f,e){return parseInt(f.getAttribute(e)||1,10)}var e=r.each;return function(f,q){function w(){var a=0;p=[];e(["thead","tbody","tfoot"],function(c){var s=d.select("> "+c+" tr",q);e(s,function(s,n){n+=a;e(d.select("> td, > th",s),function(a,d){var s,b,f,K;if(p[n])for(;p[n][d];)d++;f=h(a,"rowspan");K=h(a,"colspan");for(b=n;b<n+f;b++)for(p[b]||(p[b]=[]),
s=d;s<d+K;s++)p[b][s]={part:c,real:b==n&&s==d,elm:a,rowspan:f,colspan:K}})});a+=s.length})}function u(a,c){a=a.cloneNode(c);a.removeAttribute("id");return a}function b(a,c){var d;if(d=p[c])return d[a]}function k(a,c,d){a&&(d=parseInt(d,10),1===d?a.removeAttribute(c,1):a.setAttribute(c,d,1))}function z(a){return a&&(d.hasClass(a.elm,"mce-item-selected")||a==B)}function l(){var a=[];e(q.rows,function(c){e(c.cells,function(s){if(d.hasClass(s,"mce-item-selected")||B&&s==B.elm)return a.push(c),!1})});
return a}function m(a){var c,s={};!1!==f.settings.table_clone_elements&&(s=r.makeMap((f.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/));r.walk(a,function(b){var n;if(3==b.nodeType)return e(d.getParents(b.parentNode,null,a).reverse(),function(a){s[a.nodeName]&&(a=u(a,!1),c?n&&n.appendChild(a):c=n=a,n=a)}),n&&(n.innerHTML=x.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes");a=u(a,!1);k(a,"rowSpan",1);k(a,"colSpan",1);c?a.appendChild(c):
x.ie||(a.innerHTML='<br data-mce-bogus="1" />');return a}function I(){var a=d.createRng();e(d.select("tr",q),function(a){0===a.cells.length&&d.remove(a)});if(0===d.select("tr",q).length)a.setStartBefore(q),a.setEndBefore(q),c.setRng(a),d.remove(q);else if(e(d.select("thead,tbody,tfoot",q),function(a){0===a.rows.length&&d.remove(a)}),w(),v&&(a=p[Math.min(p.length-1,v.y)]))c.select(a[Math.min(a.length-1,v.x)].elm,!0),c.collapse(!0)}function g(a,c,s,b){var n,t,f,e,k;n=p[c][a].elm.parentNode;for(f=1;f<=
s;f++)if(n=d.getNext(n,"tr")){for(t=a;0<=t;t--)if(k=p[c+f][t].elm,k.parentNode==n){for(e=1;e<=b;e++)d.insertAfter(m(k),k);break}if(-1==t)for(e=1;e<=b;e++)n.insertBefore(m(n.cells[0]),n.cells[0])}}function E(){e(p,function(a,c){e(a,function(a,b){var n,t,f;if(z(a)&&(a=a.elm,n=h(a,"colspan"),t=h(a,"rowspan"),1<n||1<t)){k(a,"rowSpan",1);k(a,"colSpan",1);for(f=0;f<n-1;f++)d.insertAfter(m(a),a);g(b,c,t-1,n)}})})}function C(a){var c;e(p,function(d,b){e(d,function(d,s){if(d.elm==a)return c={x:s,y:b},!1});
return!c});return c}function y(){var a,c;a=c=0;e(p,function(d,b){e(d,function(d,s){var f,e;z(d)&&(d=p[b][s],s>a&&(a=s),b>c&&(c=b),d.real&&(f=d.colspan-1,e=d.rowspan-1,f&&s+f>a&&(a=s+f),e&&b+e>c&&(c=b+e)))})});return{x:a,y:c}}var p,v,A,B,c=f.selection,d=c.dom;q=q||d.getParent(c.getStart(),"table");w();if(B=d.getParent(c.getStart(),"th,td"))v=C(B),A=y(),B=b(v.x,v.y);r.extend(this,{deleteTable:function(){var a=d.createRng();a.setStartAfter(q);a.setEndAfter(q);c.setRng(a);d.remove(q)},split:E,merge:function(a,
c,s){var f,n,t,D,l,m,g;a?(f=C(a),n=f.x,t=f.y,f=n+(c-1),D=t+(s-1)):(v=A=null,e(p,function(a,c){e(a,function(a,d){z(a)&&(v||(v={x:d,y:c}),A={x:d,y:c})})}),v&&(n=v.x,t=v.y,f=A.x,D=A.y));l=b(n,t);a=b(f,D);if(l&&a&&l.part==a.part){E();w();l=b(n,t).elm;k(l,"colSpan",f-n+1);k(l,"rowSpan",D-t+1);for(s=t;s<=D;s++)for(c=n;c<=f;c++)p[s]&&p[s][c]&&(a=p[s][c].elm,a!=l&&(m=r.grep(a.childNodes),e(m,function(a){l.appendChild(a)}),m.length&&(m=r.grep(l.childNodes),g=0,e(m,function(a){"BR"==a.nodeName&&d.getAttrib(a,
"data-mce-bogus")&&g++<m.length-1&&l.removeChild(a)})),d.remove(a)));I()}},insertRow:function(a){var c,b,f,n,t,l,v,g;e(p,function(d,b){e(d,function(d){if(z(d)&&(d=d.elm,t=d.parentNode,l=u(t,!1),c=b,a))return!1});if(a)return!c});if(c!==F){for(n=0;n<p[0].length;n++)if(p[c][n]&&(b=p[c][n].elm,b!=f)){if(!a){if(g=h(b,"rowspan"),1<g){k(b,"rowSpan",g+1);continue}}else if(0<c&&p[c-1][n]&&(v=p[c-1][n].elm,g=h(v,"rowSpan"),1<g)){k(v,"rowSpan",g+1);continue}f=m(b);k(f,"colSpan",b.colSpan);l.appendChild(f);f=
b}l.hasChildNodes()&&(a?t.parentNode.insertBefore(l,t):d.insertAfter(l,t))}},insertCol:function(a){var c,b;e(p,function(d){e(d,function(d,b){if(z(d)&&(c=b,a))return!1});if(a)return!c});e(p,function(f,n){var t,e,p;f[c]&&(t=f[c].elm,t!=b&&(p=h(t,"colspan"),e=h(t,"rowspan"),1==p?(a?t.parentNode.insertBefore(m(t),t):d.insertAfter(m(t),t),g(c,n,e-1,p)):k(t,"colSpan",t.colSpan+1),b=t))})},deleteCols:function(){var a=[];e(p,function(c){e(c,function(c,b){z(c)&&-1===r.inArray(a,b)&&(e(p,function(a){a=a[b].elm;
var c;c=h(a,"colSpan");1<c?k(a,"colSpan",c-1):d.remove(a)}),a.push(b))})});I()},deleteRows:function(){function a(a){var c,b;d.getNext(a,"tr");e(a.cells,function(a){var d=h(a,"rowSpan");1<d&&(k(a,"rowSpan",d-1),c=C(a),g(c.x,c.y,1,1))});c=C(a.cells[0]);e(p[c.y],function(a){var c;a=a.elm;a!=b&&(c=h(a,"rowSpan"),1>=c?d.remove(a):k(a,"rowSpan",c-1),b=a)})}var c;c=l();e(c.reverse(),function(c){a(c)});I()},cutRows:function(){var a=l();d.remove(a);I();return a},copyRows:function(){var a=l();e(a,function(c,
d){a[d]=u(c,!0)});return a},pasteRows:function(a,c){var b=l(),f=b[c?0:b.length-1],n=f.cells.length;a&&(e(p,function(a){var c;n=0;e(a,function(a){a.real&&(n+=a.colspan);a.elm.parentNode==f&&(c=1)});if(c)return!1}),c||a.reverse(),e(a,function(a){var b,s=a.cells.length,p;for(b=0;b<s;b++)p=a.cells[b],k(p,"colSpan",1),k(p,"rowSpan",1);for(b=s;b<n;b++)a.appendChild(m(a.cells[s-1]));for(b=n;b<s;b++)d.remove(a.cells[b]);c?f.parentNode.insertBefore(a,f):d.insertAfter(a,f)}),d.removeClass(d.select("td.mce-item-selected,th.mce-item-selected"),
"mce-item-selected"))},getPos:C,setStartCell:function(a){v=C(a)},setEndCell:function(a){var c,b,f,e,k,l,z,m,g;A=C(a);if(v&&A){c=Math.min(v.x,A.x);b=Math.min(v.y,A.y);f=Math.max(v.x,A.x);e=Math.max(v.y,A.y);k=f;l=e;for(g=b;g<=l;g++)a=p[g][c],a.real||c-(a.colspan-1)<c&&(c-=a.colspan-1);for(m=c;m<=k;m++)a=p[b][m],a.real||b-(a.rowspan-1)<b&&(b-=a.rowspan-1);for(g=b;g<=e;g++)for(m=c;m<=f;m++)a=p[g][m],a.real&&(z=a.colspan-1,a=a.rowspan-1,z&&m+z>k&&(k=m+z),a&&g+a>l&&(l=g+a));d.removeClass(d.select("td.mce-item-selected,th.mce-item-selected"),
"mce-item-selected");for(g=b;g<=l;g++)for(m=c;m<=k;m++)p[g][m]&&d.addClass(p[g][m].elm,"mce-item-selected")}}})}});G("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools"],function(r,x,h){var e=h.each;return function(f){function h(){function b(k){function l(b,e){var g=b?"previousSibling":"nextSibling",h=f.dom.getParent(e,"tr"),c=h[g];if(c)return q(f,e,c,b),k.preventDefault(),!0;var c=f.dom.getParent(h,"table"),d=h.parentNode,a=d.nodeName.toLowerCase();if("tbody"===a||
a===(b?"tfoot":"thead")){var a=f.dom.select(">tbody",c),H=a.indexOf(d);b&&0===H||!b&&H===a.length-1?(d=f.dom.select(">"+(b?"thead":"tfoot"),c),d=0!==d.length?d[0]:null):-1===H?(d="thead"===d.tagName.toLowerCase()?0:a.length-1,d=a[d]):d=a[H+(b?-1:1)];if(null!==d)return(h=m(d,b))&&q(f,e,h,b),k.preventDefault(),!0}(g=c[g])?(f.selection.setCursorLocation(g,0),h=!0):(g=f.dom.getParent(c,"td,th"))?h=l(b,g,k):(h=m(h,!b),f.selection.setCursorLocation(h,0),k.preventDefault(),h=!1);return h}function m(b,e){var k=
b&&b[e?"lastChild":"firstChild"];return k&&"BR"===k.nodeName?f.dom.getParent(k,"td,th"):k}function h(b){var f=b.selection.getNode();return null!==b.dom.getParent(f,"tr")}function g(b,f){var k=0,g=0;e(b.children,function(c,b){k+=parseInt(c.getAttribute("colspan")||1,10);g=b;if(k>f)return!1});return g}function q(b,e,k,l){b=0;for(e=f.dom.getParent(e,"td,th");e.previousSibling;)e=e.previousSibling,b+=parseInt(e.getAttribute("colspan")||1,10);e=g(k,b);k=k.childNodes[e];l=m(k,l);f.selection.setCursorLocation(l||
k,0)}var u=k.keyCode;if((u==r.UP||u==r.DOWN)&&h(f)){var y=f.selection.getNode();setTimeout(function(){var b=f.selection.getNode(),b=f.dom.getParent(b,"td,th"),e=f.dom.getParent(y,"td,th");b&&b!==e&&f.dom.getParent(b,"TABLE")===f.dom.getParent(e,"TABLE")&&l(!k.shiftKey&&u===r.UP,y,k)},0)}}f.on("KeyDown",function(f){b(f)})}function w(){f.on("KeyDown",function(b){var e,l,m=f.dom;if(37==b.keyCode||38==b.keyCode)if(e=f.selection.getRng(),(l=m.getParent(e.startContainer,"table"))&&f.getBody().firstChild==
l){var h=e,g=l.ownerDocument;e=g.createRange();e.setStartBefore(l);e.setEnd(h.endContainer,h.endOffset);h=g.createElement("body");h.appendChild(e.cloneContents());0===h.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length&&(e=m.createRng(),e.setStartBefore(l),e.setEndBefore(l),f.selection.setRng(e),b.preventDefault())}})}function u(){f.on("KeyDown SetContent VisualAid",function(){var b;for(b=f.getBody().lastChild;b;b=b.previousSibling)if(3==b.nodeType){if(0<
b.nodeValue.length)break}else if(1==b.nodeType&&!b.getAttribute("data-mce-bogus"))break;b&&"TABLE"==b.nodeName&&(f.settings.forced_root_block?f.dom.add(f.getBody(),f.settings.forced_root_block,f.settings.forced_root_block_attrs,x.ie&&11>x.ie?"&nbsp;":'<br data-mce-bogus="1" />'):f.dom.add(f.getBody(),"br",{"data-mce-bogus":"1"}))});f.on("PreProcess",function(b){(b=b.node.lastChild)&&("BR"==b.nodeName||1==b.childNodes.length&&("BR"==b.firstChild.nodeName||"\u00a0"==b.firstChild.nodeValue))&&b.previousSibling&&
"TABLE"==b.previousSibling.nodeName&&f.dom.remove(b)})}function b(){function b(){var e=f.selection.getRng(),l=f.selection.getNode(),k=f.dom.getParent(e.startContainer,"TD,TH"),h=k,g=f.dom.getParent(e.startContainer,"TABLE"),q;g&&(q=g.parentNode);g=3==e.startContainer.nodeType&&0===e.startOffset&&0===e.endOffset&&h&&("TR"==l.nodeName||l==q);h=("TD"==l.nodeName||"TH"==l.nodeName)&&!h;if(g||h){k||(k=l);for(l=k.lastChild;l.lastChild;)l=l.lastChild;e.setEnd(l,l.nodeValue.length);f.selection.setRng(e)}}
f.on("KeyDown",function(){b()});f.on("MouseDown",function(f){2!=f.button&&b()})}(function(){f.on("keydown",function(b){if((b.keyCode==r.DELETE||b.keyCode==r.BACKSPACE)&&!b.isDefaultPrevented()){var e=f.dom.getParent(f.selection.getStart(),"table");if(e){for(var e=f.dom.select("td,th",e),l=e.length;l--;)if(!f.dom.hasClass(e[l],"mce-item-selected"))return;b.preventDefault();f.execCommand("mceTableDelete")}}})})();x.webkit&&(h(),b());x.gecko&&(w(),u());10<x.ie&&(w(),u())}});G("tinymce/tableplugin/CellSelection",
["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(r,x,h){return function(e){function f(){e.getBody().style.webkitUserSelect="";z&&(e.dom.removeClass(e.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),z=!1)}function q(f){var h,q=f.target;if(b&&(u||q!=b)&&("TD"==q.nodeName||"TH"==q.nodeName)){h=w.getParent(q,"table");h==k&&(u||(u=new r(e,h),u.setStartCell(b),e.getBody().style.webkitUserSelect="none"),u.setEndCell(q),z=!0);h=e.selection.getSel();
try{h.removeAllRanges?h.removeAllRanges():h.empty()}catch(g){}f.preventDefault()}}var w=e.dom,u,b,k,z=!0;e.on("MouseDown",function(e){2!=e.button&&(f(),b=w.getParent(e.target,"td,th"),k=w.getParent(b,"table"))});e.on("mouseover",q);e.on("remove",function(){w.unbind(e.getDoc(),"mouseover",q)});e.on("MouseUp",function(){function f(b,e){var g=new x(b,b);do{if(3==b.nodeType&&0!==h.trim(b.nodeValue).length){e?m.setStart(b,0):m.setEnd(b,b.nodeValue.length);break}if("BR"==b.nodeName){e?m.setStartBefore(b):
m.setEndBefore(b);break}}while(b=e?g.next():g.prev())}var m,q=e.selection,g,r,z;if(b){u&&(e.getBody().style.webkitUserSelect="");g=w.select("td.mce-item-selected,th.mce-item-selected");if(0<g.length){m=w.createRng();r=g[0];m.setStartBefore(r);m.setEndAfter(r);f(r,1);g=new x(r,w.getParent(g[0],"table"));do if("TD"==r.nodeName||"TH"==r.nodeName){if(!w.hasClass(r,"mce-item-selected"))break;z=r}while(r=g.next());f(z);q.setRng(m)}e.nodeChanged();b=u=k=null}});e.on("KeyUp",function(){f()});return{clear:f}}});
G("tinymce/tableplugin/Plugin","tinymce/tableplugin/TableGrid tinymce/tableplugin/Quirks tinymce/tableplugin/CellSelection tinymce/util/Tools tinymce/dom/TreeWalker tinymce/Env tinymce/PluginManager".split(" "),function(r,x,h,e,f,q,w){var u=e.each;w.add("table",function(b){function f(c){return c?c.replace(/px$/,""):""}function e(c){/^[0-9]+$/.test(c)&&(c+="px");return c}function l(c){u(["left","center","right"],function(d){b.formatter.remove("align"+d,{},c)})}function m(){var c=b.dom,d,a;d=c.getParent(b.selection.getStart(),
"table");a={width:f(c.getStyle(d,"width")||c.getAttrib(d,"width")),height:f(c.getStyle(d,"height")||c.getAttrib(d,"height")),cellspacing:c.getAttrib(d,"cellspacing"),cellpadding:c.getAttrib(d,"cellpadding"),border:c.getAttrib(d,"border"),caption:!!c.select("caption",d)[0]};u(["left","center","right"],function(c){b.formatter.matchNode(d,"align"+c)&&(a.align=c)});b.windowManager.open({title:"Table properties",items:{type:"form",layout:"grid",columns:2,data:a,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",
name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"},{label:"Alignment",minWidth:90,name:"align",type:"listbox",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var a=this.toJSON(),f;b.undoManager.transact(function(){b.dom.setAttribs(d,
{cellspacing:a.cellspacing,cellpadding:a.cellpadding,border:a.border});b.dom.setStyles(d,{width:e(a.width),height:e(a.height)});(f=c.select("caption",d)[0])&&!a.caption&&c.remove(f);!f&&a.caption&&(f=c.create("caption"),f.innerHTML=q.ie?"\u00a0":'<br data-mce-bogus="1"/>',d.insertBefore(f,d.firstChild));l(d);a.align&&b.formatter.apply("align"+a.align,{},d);b.focus();b.addVisual()})}})}function w(c,d){b.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",size:10},
{label:"Rows",name:"rows",type:"textbox",size:10}],onsubmit:function(){var a=this.toJSON();b.undoManager.transact(function(){c.merge(d,a.cols,a.rows)})}})}function g(c){return function(){b.execCommand(c)}}function E(c,d){function a(){c.disabled(!b.dom.getParent(b.selection.getStart(),d));b.selection.selectorChanged(d,function(a){c.disabled(!a)})}if(b.initialized)a();else b.on("init",a)}function C(){E(this,"table")}function y(){E(this,"td,th")}function p(c,d,a){var f=a.getEl().getElementsByTagName("table")[0],
e=a.parent().rel,g,h;if(a.isRtl()||"tl-tr"==e){for(e=9;0<=e;e--)for(a=0;10>a;a++)h=f.rows[e].childNodes[a].firstChild,b.dom.toggleClass(h,"mce-active",a>=c&&e<=d),a>=c&&e<=d&&(g=h);f.nextSibling.innerHTML=9-c+" x "+(d+1)}else{for(e=0;10>e;e++)for(a=0;10>a;a++)h=f.rows[e].childNodes[a].firstChild,b.dom.toggleClass(h,"mce-active",a<=c&&e<=d),a<=c&&e<=d&&(g=h);f.nextSibling.innerHTML=c+1+" x "+(d+1)}return g.parentNode}var v,A=this;b.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",
onhide:function(){var c=this.menu.items()[0].getEl().getElementsByTagName("a");b.dom.removeClass(c,"mce-active");b.dom.addClass(c[0],"mce-active")},menu:[{type:"container",html:function(){for(var c="",c='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',b=0;10>b;b++){for(var c=c+"<tr>",a=0;10>a;a++)c+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*b+a)+'" href="#" data-mce-x="'+a+'" data-mce-y="'+b+'" '+(0===a+b?' class="mce-active"':"")+"></a></td>";c+="</tr>"}return c+=
'</table><div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(c){var b=c.target,a;"A"==b.nodeName&&(a=parseInt(b.getAttribute("data-mce-x"),10),b=parseInt(b.getAttribute("data-mce-y"),10),a!==this.lastX||b!==this.lastY)&&(p(a,b,c.control),this.lastX=a,this.lastY=b)},onkeydown:function(b){var d=this.lastX,a=this.lastY,e;switch(b.keyCode){case 37:0<d&&(d--,e=!0);break;case 39:e=!0;9>d&&d++;break;case 38:e=!0;0<a&&a--;
break;case 40:e=!0,9>a&&a++}e&&(b.preventDefault(),b.stopPropagation(),p(d,a,b.control).focus(),this.lastX=d,this.lastY=a)},onclick:function(c){if("A"==c.target.nodeName){c.preventDefault();c.stopPropagation();this.parent().cancel();var d,a;a="<table><tbody>";for(c=0;c<this.lastY+1;c++){a+="<tr>";for(d=0;d<this.lastX+1;d++)a+="<td>"+(q.ie?" ":"<br>")+"</td>";a+="</tr>"}b.insertContent(a+"</tbody></table>")}}}]});b.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:C,onclick:m});
b.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:C,cmd:"mceTableDelete"});b.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:g("mceTableCellProps"),onPostRender:y},{text:"Merge cells",onclick:g("mceTableMergeCells"),onPostRender:y},{text:"Split cell",onclick:g("mceTableSplitCells"),onPostRender:y}]});b.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:g("mceTableInsertRowBefore"),
onPostRender:y},{text:"Insert row after",onclick:g("mceTableInsertRowAfter"),onPostRender:y},{text:"Delete row",onclick:g("mceTableDeleteRow"),onPostRender:y},{text:"Row properties",onclick:g("mceTableRowProps"),onPostRender:y},{text:"-"},{text:"Cut row",onclick:g("mceTableCutRow"),onPostRender:y},{text:"Copy row",onclick:g("mceTableCopyRow"),onPostRender:y},{text:"Paste row before",onclick:g("mceTablePasteRowBefore"),onPostRender:y},{text:"Paste row after",onclick:g("mceTablePasteRowAfter"),onPostRender:y}]});
b.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:g("mceTableInsertColBefore"),onPostRender:y},{text:"Insert column after",onclick:g("mceTableInsertColAfter"),onPostRender:y},{text:"Delete column",onclick:g("mceTableDeleteCol"),onPostRender:y}]});var B=[];u("inserttable tableprops deletetable | cell row column".split(" "),function(c){"|"==c?B.push({text:"-"}):B.push(b.menuItems[c])});b.addButton("table",{type:"menubutton",title:"Table",menu:B});if(!q.isIE)b.on("click",
function(c){c=c.target;"TABLE"===c.nodeName&&(b.selection.select(c),b.nodeChanged())});A.quirks=new x(b);b.on("Init",function(){A.cellSelection=new h(b)});u({mceTableSplitCells:function(b){b.split()},mceTableMergeCells:function(c){var d;d=b.dom.getParent(b.selection.getStart(),"th,td");b.dom.select("td.mce-item-selected,th.mce-item-selected").length?c.merge():w(c,d)},mceTableInsertRowBefore:function(b){b.insertRow(!0)},mceTableInsertRowAfter:function(b){b.insertRow()},mceTableInsertColBefore:function(b){b.insertCol(!0)},
mceTableInsertColAfter:function(b){b.insertCol()},mceTableDeleteCol:function(b){b.deleteCols()},mceTableDeleteRow:function(b){b.deleteRows()},mceTableCutRow:function(b){v=b.cutRows()},mceTableCopyRow:function(b){v=b.copyRows()},mceTablePasteRowBefore:function(b){b.pasteRows(v,!0)},mceTablePasteRowAfter:function(b){b.pasteRows(v)},mceTableDelete:function(b){b.deleteTable()}},function(c,d){b.addCommand(d,function(){var a=new r(b);a&&(c(a),b.execCommand("mceRepaint"),A.cellSelection.clear())})});u({mceInsertTable:function(){m()},
mceTableRowProps:function(){var c=b.dom,d,a,g,h,m=[];d=b.dom.getParent(b.selection.getStart(),"table");a=b.dom.getParent(b.selection.getStart(),"td,th");u(d.rows,function(b){u(b.cells,function(d){if(c.hasClass(d,"mce-item-selected")||d==a)return m.push(b),!1})});if(g=m[0])h={height:f(c.getStyle(g,"height")||c.getAttrib(g,"height")),scope:c.getAttrib(g,"scope")},h.type=g.parentNode.nodeName.toLowerCase(),u(["left","center","right"],function(a){b.formatter.matchNode(g,"align"+a)&&(h.align=a)}),b.windowManager.open({title:"Row properties",
items:{type:"form",data:h,columns:2,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"}]},onsubmit:function(){var a=this.toJSON(),
d,f,g;b.undoManager.transact(function(){var h=a.type;u(m,function(k){b.dom.setAttrib(k,"scope",a.scope);b.dom.setStyles(k,{height:e(a.height)});h!=k.parentNode.nodeName.toLowerCase()&&(d=c.getParent(k,"table"),f=k.parentNode,g=c.select(h,d)[0],g||(g=c.create(h),d.firstChild?d.insertBefore(g,d.firstChild):d.appendChild(g)),g.appendChild(k),f.hasChildNodes()||c.remove(f));l(k);a.align&&b.formatter.apply("align"+a.align,{},k)});b.focus()})}})},mceTableCellProps:function(){var c=b.dom,d,a,g=[],g=b.dom.select("td.mce-item-selected,th.mce-item-selected");
d=b.dom.getParent(b.selection.getStart(),"td,th");!g.length&&d&&g.push(d);if(d=d||g[0])a={width:f(c.getStyle(d,"width")||c.getAttrib(d,"width")),height:f(c.getStyle(d,"height")||c.getAttrib(d,"height")),scope:c.getAttrib(d,"scope")},a.type=d.nodeName.toLowerCase(),u(["left","center","right"],function(c){b.formatter.matchNode(d,"align"+c)&&(a.align=c)}),b.windowManager.open({title:"Cell properties",items:{type:"form",data:a,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",
name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",minWidth:90,
maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var a=this.toJSON();b.undoManager.transact(function(){u(g,function(d){b.dom.setAttrib(d,"scope",a.scope);b.dom.setStyles(d,{width:e(a.width),height:e(a.height)});a.type&&d.nodeName.toLowerCase()!=a.type&&(d=c.rename(d,a.type));l(d);a.align&&b.formatter.apply("align"+a.align,{},d)});b.focus()})}})}},function(c,d){b.addCommand(d,function(a,b){c(b)})})})});
(function(r){for(var x=0;x<r.length;x++){for(var h=L,e=r[x],f=e.split(/[.\/]/),q=0;q<f.length-1;++q)h[f[q]]===F&&(h[f[q]]={}),h=h[f[q]];h[f[f.length-1]]=J[e]}})(["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Plugin"])})(this);
