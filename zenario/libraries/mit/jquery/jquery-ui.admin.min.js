(function(d,v){d.widget("ui.draggable",d.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||
/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(c){var a=this.options;if(this.helper||a.disabled||0<d(c.target).closest(".ui-resizable-handle").length)return!1;
this.handle=this._getHandle(c);if(!this.handle)return!1;d(!0===a.iframeFix?"iframe":a.iframeFix).each(function(){d("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")});return!0},_mouseStart:function(c){var a=this.options;this.helper=this._createHelper(c);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();
d.ui.ddmanager&&(d.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offsetParent=this.helper.offsetParent();this.offsetParentCssPosition=this.offsetParent.css("position");this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.offset.scroll=!1;d.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},
parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(c);this.originalPageX=c.pageX;this.originalPageY=c.pageY;a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt);this._setContainment();if(!1===this._trigger("start",c))return this._clear(),!1;this._cacheHelperProportions();d.ui.ddmanager&&!a.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,c);this._mouseDrag(c,!0);d.ui.ddmanager&&d.ui.ddmanager.dragStart(this,c);return!0},
_mouseDrag:function(c,a){"fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");if(!a){var b=this._uiHash();if(!1===this._trigger("drag",c,b))return this._mouseUp({}),!1;this.position=b.position}this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+
"px");d.ui.ddmanager&&d.ui.ddmanager.drag(this,c);return!1},_mouseStop:function(c){var a=this,b=!1;d.ui.ddmanager&&!this.options.dropBehaviour&&(b=d.ui.ddmanager.drop(this,c));this.dropped&&(b=this.dropped,this.dropped=!1);if("original"===this.options.helper&&!d.contains(this.element[0].ownerDocument,this.element[0]))return!1;"invalid"===this.options.revert&&!b||"valid"===this.options.revert&&b||!0===this.options.revert||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,b)?
d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==a._trigger("stop",c)&&a._clear()}):!1!==this._trigger("stop",c)&&this._clear();return!1},_mouseUp:function(c){d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});d.ui.ddmanager&&d.ui.ddmanager.dragStop(this,c);return d.ui.mouse.prototype._mouseUp.call(this,c)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(c){return this.options.handle?
!!d(c.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(c){var a=this.options;c=d.isFunction(a.helper)?d(a.helper.apply(this.element[0],[c])):"clone"===a.helper?this.element.clone().removeAttr("id"):this.element;c.parents("body").length||c.appendTo("parent"===a.appendTo?this.element[0].parentNode:a.appendTo);c[0]===this.element[0]||/(fixed|absolute)/.test(c.css("position"))||c.css("position","absolute");return c},_adjustOffsetFromHelper:function(c){"string"===
typeof c&&(c=c.split(" "));d.isArray(c)&&(c={left:+c[0],top:+c[1]||0});"left"in c&&(this.offset.click.left=c.left+this.margins.left);"right"in c&&(this.offset.click.left=this.helperProportions.width-c.right+this.margins.left);"top"in c&&(this.offset.click.top=c.top+this.margins.top);"bottom"in c&&(this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top)},_getParentOffset:function(){var c=this.offsetParent.offset();"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&
d.contains(this.scrollParent[0],this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&d.ui.ie)c={top:0,left:0};return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var d=this.element.position();
return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c,a,b;c=this.options;if(c.containment)if("window"===c.containment)this.containment=[d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,d(window).scrollLeft()+d(window).width()-this.helperProportions.width-this.margins.left,d(window).scrollTop()+(d(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top];else if("document"===c.containment)this.containment=[0,0,d(document).width()-this.helperProportions.width-this.margins.left,(d(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if(c.containment.constructor===Array)this.containment=c.containment;else{if("parent"===c.containment&&(c.containment=this.helper[0].parentNode),a=d(c.containment),b=a[0])c="hidden"!==a.css("overflow"),this.containment=[(parseInt(a.css("borderLeftWidth"),
10)||0)+(parseInt(a.css("paddingLeft"),10)||0),(parseInt(a.css("borderTopWidth"),10)||0)+(parseInt(a.css("paddingTop"),10)||0),(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a.css("borderRightWidth"),10)||0)-(parseInt(a.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a.css("borderBottomWidth"),10)||0)-(parseInt(a.css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top-this.margins.bottom],this.relative_container=a}else this.containment=null},_convertPositionTo:function(c,a){a||(a=this.position);var b="absolute"===c?1:-1,k="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&d.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;this.offset.scroll||(this.offset.scroll={top:k.scrollTop(),left:k.scrollLeft()});return{top:a.top+this.offset.relative.top*b+this.offset.parent.top*b-("fixed"===this.cssPosition?
-this.scrollParent.scrollTop():this.offset.scroll.top)*b,left:a.left+this.offset.relative.left*b+this.offset.parent.left*b-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*b}},_generatePosition:function(c){var a,b,k,e=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&d.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;k=c.pageX;b=c.pageY;this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),
left:h.scrollLeft()});this.originalPosition&&(this.containment&&(this.relative_container?(a=this.relative_container.offset(),a=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]):a=this.containment,c.pageX-this.offset.click.left<a[0]&&(k=a[0]+this.offset.click.left),c.pageY-this.offset.click.top<a[1]&&(b=a[1]+this.offset.click.top),c.pageX-this.offset.click.left>a[2]&&(k=a[2]+this.offset.click.left),c.pageY-this.offset.click.top>a[3]&&(b=a[3]+
this.offset.click.top)),e.grid&&(b=e.grid[1]?this.originalPageY+Math.round((b-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY,b=a?b-this.offset.click.top>=a[1]||b-this.offset.click.top>a[3]?b:b-this.offset.click.top>=a[1]?b-e.grid[1]:b+e.grid[1]:b,k=e.grid[0]?this.originalPageX+Math.round((k-this.originalPageX)/e.grid[0])*e.grid[0]:this.originalPageX,k=a?k-this.offset.click.left>=a[0]||k-this.offset.click.left>a[2]?k:k-this.offset.click.left>=a[0]?k-e.grid[0]:k+e.grid[0]:k));return{top:b-
this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:k-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=
!1},_trigger:function(c,a,b){b=b||this._uiHash();d.ui.plugin.call(this,c,[a,b]);"drag"===c&&(this.positionAbs=this._convertPositionTo("absolute"));return d.Widget.prototype._trigger.call(this,c,a,b)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.ui.plugin.add("draggable","connectToSortable",{start:function(c,a){var b=d(this).data("ui-draggable"),k=b.options,e=d.extend({},a,{item:b.element});b.sortables=
[];d(k.connectToSortable).each(function(){var a=d.data(this,"ui-sortable");a&&!a.options.disabled&&(b.sortables.push({instance:a,shouldRevert:a.options.revert}),a.refreshPositions(),a._trigger("activate",c,e))})},stop:function(c,a){var b=d(this).data("ui-draggable"),k=d.extend({},a,{item:b.element});d.each(b.sortables,function(){this.instance.isOver?(this.instance.isOver=0,b.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),
this.instance._mouseStop(c),this.instance.options.helper=this.instance.options._helper,"original"===b.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",c,k))})},drag:function(c,a){var b=d(this).data("ui-draggable"),k=this;d.each(b.sortables,function(){var e=!1,h=this;this.instance.positionAbs=b.positionAbs;this.instance.helperProportions=b.helperProportions;this.instance.offset.click=b.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&
(e=!0,d.each(b.sortables,function(){this.instance.positionAbs=b.positionAbs;this.instance.helperProportions=b.helperProportions;this.instance.offset.click=b.offset.click;this!==h&&this.instance._intersectsWith(this.instance.containerCache)&&d.contains(h.instance.element[0],this.instance.element[0])&&(e=!1);return e}));e?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=d(k).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=
this.instance.options.helper,this.instance.options.helper=function(){return a.helper[0]},c.target=this.instance.currentItem[0],this.instance._mouseCapture(c,!0),this.instance._mouseStart(c,!0,!0),this.instance.offset.click.top=b.offset.click.top,this.instance.offset.click.left=b.offset.click.left,this.instance.offset.parent.left-=b.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=b.offset.parent.top-this.instance.offset.parent.top,b._trigger("toSortable",c),b.dropped=
this.instance.element,b.currentItem=b.element,this.instance.fromOutside=b),this.instance.currentItem&&this.instance._mouseDrag(c)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",c,this.instance._uiHash(this.instance)),this.instance._mouseStop(c,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),
b._trigger("fromSortable",c),b.dropped=!1)})}});d.ui.plugin.add("draggable","cursor",{start:function(){var c=d("body"),a=d(this).data("ui-draggable").options;c.css("cursor")&&(a._cursor=c.css("cursor"));c.css("cursor",a.cursor)},stop:function(){var c=d(this).data("ui-draggable").options;c._cursor&&d("body").css("cursor",c._cursor)}});d.ui.plugin.add("draggable","opacity",{start:function(c,a){var b=d(a.helper),k=d(this).data("ui-draggable").options;b.css("opacity")&&(k._opacity=b.css("opacity"));b.css("opacity",
k.opacity)},stop:function(c,a){var b=d(this).data("ui-draggable").options;b._opacity&&d(a.helper).css("opacity",b._opacity)}});d.ui.plugin.add("draggable","scroll",{start:function(){var c=d(this).data("ui-draggable");c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName&&(c.overflowOffset=c.scrollParent.offset())},drag:function(c){var a=d(this).data("ui-draggable"),b=a.options,k=!1;a.scrollParent[0]!==document&&"HTML"!==a.scrollParent[0].tagName?(b.axis&&"x"===b.axis||(a.overflowOffset.top+
a.scrollParent[0].offsetHeight-c.pageY<b.scrollSensitivity?a.scrollParent[0].scrollTop=k=a.scrollParent[0].scrollTop+b.scrollSpeed:c.pageY-a.overflowOffset.top<b.scrollSensitivity&&(a.scrollParent[0].scrollTop=k=a.scrollParent[0].scrollTop-b.scrollSpeed)),b.axis&&"y"===b.axis||(a.overflowOffset.left+a.scrollParent[0].offsetWidth-c.pageX<b.scrollSensitivity?a.scrollParent[0].scrollLeft=k=a.scrollParent[0].scrollLeft+b.scrollSpeed:c.pageX-a.overflowOffset.left<b.scrollSensitivity&&(a.scrollParent[0].scrollLeft=
k=a.scrollParent[0].scrollLeft-b.scrollSpeed))):(b.axis&&"x"===b.axis||(c.pageY-d(document).scrollTop()<b.scrollSensitivity?k=d(document).scrollTop(d(document).scrollTop()-b.scrollSpeed):d(window).height()-(c.pageY-d(document).scrollTop())<b.scrollSensitivity&&(k=d(document).scrollTop(d(document).scrollTop()+b.scrollSpeed))),b.axis&&"y"===b.axis||(c.pageX-d(document).scrollLeft()<b.scrollSensitivity?k=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed):d(window).width()-(c.pageX-d(document).scrollLeft())<
b.scrollSensitivity&&(k=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed))));!1!==k&&d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(a,c)}});d.ui.plugin.add("draggable","snap",{start:function(){var c=d(this).data("ui-draggable"),a=c.options;c.snapElements=[];d(a.snap.constructor!==String?a.snap.items||":data(ui-draggable)":a.snap).each(function(){var b=d(this),a=b.offset();this!==c.element[0]&&c.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),
top:a.top,left:a.left})})},drag:function(c,a){var b,k,e,h,f,g,l,n,p,q,m=d(this).data("ui-draggable"),t=m.options,r=t.snapTolerance,s=a.offset.left,u=s+m.helperProportions.width,w=a.offset.top,x=w+m.helperProportions.height;for(p=m.snapElements.length-1;0<=p;p--)f=m.snapElements[p].left,g=f+m.snapElements[p].width,l=m.snapElements[p].top,n=l+m.snapElements[p].height,u<f-r||s>g+r||x<l-r||w>n+r||!d.contains(m.snapElements[p].item.ownerDocument,m.snapElements[p].item)?(m.snapElements[p].snapping&&m.options.snap.release&&
m.options.snap.release.call(m.element,c,d.extend(m._uiHash(),{snapItem:m.snapElements[p].item})),m.snapElements[p].snapping=!1):("inner"!==t.snapMode&&(b=Math.abs(l-x)<=r,k=Math.abs(n-w)<=r,e=Math.abs(f-u)<=r,h=Math.abs(g-s)<=r,b&&(a.position.top=m._convertPositionTo("relative",{top:l-m.helperProportions.height,left:0}).top-m.margins.top),k&&(a.position.top=m._convertPositionTo("relative",{top:n,left:0}).top-m.margins.top),e&&(a.position.left=m._convertPositionTo("relative",{top:0,left:f-m.helperProportions.width}).left-
m.margins.left),h&&(a.position.left=m._convertPositionTo("relative",{top:0,left:g}).left-m.margins.left)),q=b||k||e||h,"outer"!==t.snapMode&&(b=Math.abs(l-w)<=r,k=Math.abs(n-x)<=r,e=Math.abs(f-s)<=r,h=Math.abs(g-u)<=r,b&&(a.position.top=m._convertPositionTo("relative",{top:l,left:0}).top-m.margins.top),k&&(a.position.top=m._convertPositionTo("relative",{top:n-m.helperProportions.height,left:0}).top-m.margins.top),e&&(a.position.left=m._convertPositionTo("relative",{top:0,left:f}).left-m.margins.left),
h&&(a.position.left=m._convertPositionTo("relative",{top:0,left:g-m.helperProportions.width}).left-m.margins.left)),!m.snapElements[p].snapping&&(b||k||e||h||q)&&m.options.snap.snap&&m.options.snap.snap.call(m.element,c,d.extend(m._uiHash(),{snapItem:m.snapElements[p].item})),m.snapElements[p].snapping=b||k||e||h||q)}});d.ui.plugin.add("draggable","stack",{start:function(){var c,a=this.data("ui-draggable").options,a=d.makeArray(d(a.stack)).sort(function(b,a){return(parseInt(d(b).css("zIndex"),10)||
0)-(parseInt(d(a).css("zIndex"),10)||0)});a.length&&(c=parseInt(d(a[0]).css("zIndex"),10)||0,d(a).each(function(b){d(this).css("zIndex",c+b)}),this.css("zIndex",c+a.length))}});d.ui.plugin.add("draggable","zIndex",{start:function(c,a){var b=d(a.helper),k=d(this).data("ui-draggable").options;b.css("zIndex")&&(k._zIndex=b.css("zIndex"));b.css("zIndex",k.zIndex)},stop:function(c,a){var b=d(this).data("ui-draggable").options;b._zIndex&&d(a.helper).css("zIndex",b._zIndex)}})})(jQuery);
(function(d,v){d.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var c=this.options,a=c.accept;this.isover=!1;this.isout=!0;this.accept=d.isFunction(a)?a:function(b){return b.is(a)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};d.ui.ddmanager.droppables[c.scope]=
d.ui.ddmanager.droppables[c.scope]||[];d.ui.ddmanager.droppables[c.scope].push(this);c.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var c=0,a=d.ui.ddmanager.droppables[this.options.scope];c<a.length;c++)a[c]===this&&a.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(c,a){"accept"===c&&(this.accept=d.isFunction(a)?a:function(b){return b.is(a)});d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(c){var a=
d.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);a&&this._trigger("activate",c,this.ui(a))},_deactivate:function(c){var a=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);a&&this._trigger("deactivate",c,this.ui(a))},_over:function(c){var a=d.ui.ddmanager.current;a&&(a.currentItem||a.element)[0]!==this.element[0]&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),
this._trigger("over",c,this.ui(a)))},_out:function(c){var a=d.ui.ddmanager.current;a&&(a.currentItem||a.element)[0]!==this.element[0]&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",c,this.ui(a)))},_drop:function(c,a){var b=a||d.ui.ddmanager.current,k=!1;if(!b||(b.currentItem||b.element)[0]===this.element[0])return!1;this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var a=
d.data(this,"ui-droppable");if(a.options.greedy&&!a.options.disabled&&a.options.scope===b.options.scope&&a.accept.call(a.element[0],b.currentItem||b.element)&&d.ui.intersect(b,d.extend(a,{offset:a.element.offset()}),a.options.tolerance))return k=!0,!1});return k?!1:this.accept.call(this.element[0],b.currentItem||b.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",c,
this.ui(b)),this.element):!1},ui:function(d){return{draggable:d.currentItem||d.element,helper:d.helper,position:d.position,offset:d.positionAbs}}});d.ui.intersect=function(d,a,b){if(!a.offset)return!1;var k=(d.positionAbs||d.position.absolute).left,e=k+d.helperProportions.width,h=(d.positionAbs||d.position.absolute).top,f=h+d.helperProportions.height,g=a.offset.left,l=g+a.proportions.width,n=a.offset.top,p=n+a.proportions.height;switch(b){case "fit":return g<=k&&e<=l&&n<=h&&f<=p;case "intersect":return g<
k+d.helperProportions.width/2&&e-d.helperProportions.width/2<l&&n<h+d.helperProportions.height/2&&f-d.helperProportions.height/2<p;case "pointer":return b=(d.positionAbs||d.position.absolute).left+(d.clickOffset||d.offset.click).left,d=(d.positionAbs||d.position.absolute).top+(d.clickOffset||d.offset.click).top,d>n&&d<n+a.proportions.height&&b>g&&b<g+a.proportions.width;case "touch":return(h>=n&&h<=p||f>=n&&f<=p||h<n&&f>p)&&(k>=g&&k<=l||e>=g&&e<=l||k<g&&e>l);default:return!1}};d.ui.ddmanager={current:null,
droppables:{"default":[]},prepareOffsets:function(c,a){var b,k,e=d.ui.ddmanager.droppables[c.options.scope]||[],h=a?a.type:null,f=(c.currentItem||c.element).find(":data(ui-droppable)").addBack();b=0;a:for(;b<e.length;b++)if(!(e[b].options.disabled||c&&!e[b].accept.call(e[b].element[0],c.currentItem||c.element))){for(k=0;k<f.length;k++)if(f[k]===e[b].element[0]){e[b].proportions.height=0;continue a}e[b].visible="none"!==e[b].element.css("display");e[b].visible&&("mousedown"===h&&e[b]._activate.call(e[b],
a),e[b].offset=e[b].element.offset(),e[b].proportions={width:e[b].element[0].offsetWidth,height:e[b].element[0].offsetHeight})}},drop:function(c,a){var b=!1;d.each((d.ui.ddmanager.droppables[c.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&d.ui.intersect(c,this,this.options.tolerance)&&(b=this._drop.call(this,a)||b),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,
a)))});return b},dragStart:function(c,a){c.element.parentsUntil("body").bind("scroll.droppable",function(){c.options.refreshPositions||d.ui.ddmanager.prepareOffsets(c,a)})},drag:function(c,a){c.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(c,a);d.each(d.ui.ddmanager.droppables[c.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var b,k,e;e=d.ui.intersect(c,this,this.options.tolerance);var h=!e&&this.isover?"isout":e&&!this.isover?"isover":null;h&&
(this.options.greedy&&(k=this.options.scope,e=this.element.parents(":data(ui-droppable)").filter(function(){return d.data(this,"ui-droppable").options.scope===k}),e.length&&(b=d.data(e[0],"ui-droppable"),b.greedyChild="isover"===h)),b&&"isover"===h&&(b.isover=!1,b.isout=!0,b._out.call(b,a)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,a),b&&"isout"===h&&(b.isout=!1,b.isover=!0,b._over.call(b,a)))}})},dragStop:function(c,a){c.element.parentsUntil("body").unbind("scroll.droppable");
c.options.refreshPositions||d.ui.ddmanager.prepareOffsets(c,a)}}})(jQuery);
(function(d,v){function c(b){return parseInt(b,10)||0}function a(b){return!isNaN(parseInt(b,10))}d.widget("ui.resizable",d.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,a,e,c,f,g=this,l=this.options;this.element.addClass("ui-resizable");
d.extend(this,{_aspectRatio:!!l.aspectRatio,aspectRatio:l.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:l.helper||l.ghost||l.animate?l.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(d("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),
left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),
this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=l.handles||(d(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");
if(this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},a=0;a<b.length;a++)e=d.trim(b[a]),f="ui-resizable-"+e,c=d("<div class='ui-resizable-handle "+f+"'></div>"),c.css({zIndex:l.zIndex}),"se"===e&&c.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[e]=".ui-resizable-"+e,this.element.append(c);this._renderAxis=function(b){var a,k,e;b=b||this.element;for(a in this.handles)this.handles[a].constructor===
String&&(this.handles[a]=d(this.handles[a],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(k=d(this.handles[a],this.element),e=/sw|ne|nw|se|n|s/.test(a)?k.outerHeight():k.outerWidth(),k=["padding",/ne|nw|n/.test(a)?"Top":/se|sw|s/.test(a)?"Bottom":/^e$/.test(a)?"Right":"Left"].join(""),b.css(k,e),this._proportionallyResize()),d(this.handles[a])};this._renderAxis(this.element);this._handles=d(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){g.resizing||(this.className&&(c=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=c&&c[1]?c[1]:"se")});l.autoHide&&(this._handles.hide(),d(this.element).addClass("ui-resizable-autohide").mouseenter(function(){l.disabled||(d(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){l.disabled||g.resizing||(d(this).addClass("ui-resizable-autohide"),g._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();
var b,a=function(b){d(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};this.elementIsWrapper&&(a(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove());this.originalElement.css("resize",this.originalResizeStyle);a(this.originalElement);
return this},_mouseCapture:function(b){var a,e,c=!1;for(a in this.handles)if(e=d(this.handles[a])[0],e===b.target||d.contains(e,b.target))c=!0;return!this.options.disabled&&c},_mouseStart:function(b){var a,e,h;h=this.options;a=this.element.position();var f=this.element;this.resizing=!0;/absolute/.test(f.css("position"))?f.css({position:"absolute",top:f.css("top"),left:f.css("left")}):f.is(".ui-draggable")&&f.css({position:"absolute",top:a.top,left:a.left});this._renderProxy();a=c(this.helper.css("left"));
e=c(this.helper.css("top"));h.containment&&(a+=d(h.containment).scrollLeft()||0,e+=d(h.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:a,top:e};this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()};this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()};this.originalPosition={left:a,top:e};this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-
f.height()};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio="number"===typeof h.aspectRatio?h.aspectRatio:this.originalSize.width/this.originalSize.height||1;h=d(".ui-resizable-"+this.axis).css("cursor");d("body").css("cursor","auto"===h?this.axis+"-resize":h);f.addClass("ui-resizable-resizing");this._propagate("start",b);return!0},_mouseDrag:function(b){var a,e=this.helper,c={};a=this.originalMousePosition;var f=this.position.top,g=this.position.left,l=this.size.width,n=this.size.height,
p=this._change[this.axis];if(!p)return!1;a=p.apply(this,[b,b.pageX-a.left||0,b.pageY-a.top||0]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)a=this._updateRatio(a,b);a=this._respectSize(a,b);this._updateCache(a);this._propagate("resize",b);this.position.top!==f&&(c.top=this.position.top+"px");this.position.left!==g&&(c.left=this.position.left+"px");this.size.width!==l&&(c.width=this.size.width+"px");this.size.height!==n&&(c.height=this.size.height+"px");e.css(c);!this._helper&&
this._proportionallyResizeElements.length&&this._proportionallyResize();d.isEmptyObject(c)||this._trigger("resize",b,this.ui());return!1},_mouseStop:function(b){this.resizing=!1;var a,e,c,f=this.options;this._helper&&(a=this._proportionallyResizeElements,a=(e=a.length&&/textarea/i.test(a[0].nodeName))&&d.ui.hasScroll(a[0],"left")?0:this.sizeDiff.height,e=e?0:this.sizeDiff.width,e={width:this.helper.width()-e,height:this.helper.height()-a},a=parseInt(this.element.css("left"),10)+(this.position.left-
this.originalPosition.left)||null,c=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,f.animate||this.element.css(d.extend(e,{top:c,left:a})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!f.animate&&this._proportionallyResize());d("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",b);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(b){var k,
d,c,f;f=this.options;f={minWidth:a(f.minWidth)?f.minWidth:0,maxWidth:a(f.maxWidth)?f.maxWidth:Infinity,minHeight:a(f.minHeight)?f.minHeight:0,maxHeight:a(f.maxHeight)?f.maxHeight:Infinity};if(this._aspectRatio||b)b=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,k=f.maxHeight*this.aspectRatio,c=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),d>f.minHeight&&(f.minHeight=d),k<f.maxWidth&&(f.maxWidth=k),c<f.maxHeight&&(f.maxHeight=c);this._vBoundaries=f},_updateCache:function(b){this.offset=
this.helper.offset();a(b.left)&&(this.position.left=b.left);a(b.top)&&(this.position.top=b.top);a(b.height)&&(this.size.height=b.height);a(b.width)&&(this.size.width=b.width)},_updateRatio:function(b){var k=this.position,d=this.size,c=this.axis;a(b.height)?b.width=b.height*this.aspectRatio:a(b.width)&&(b.height=b.width/this.aspectRatio);"sw"===c&&(b.left=k.left+(d.width-b.width),b.top=null);"nw"===c&&(b.top=k.top+(d.height-b.height),b.left=k.left+(d.width-b.width));return b},_respectSize:function(b){var d=
this._vBoundaries,e=this.axis,c=a(b.width)&&d.maxWidth&&d.maxWidth<b.width,f=a(b.height)&&d.maxHeight&&d.maxHeight<b.height,g=a(b.width)&&d.minWidth&&d.minWidth>b.width,l=a(b.height)&&d.minHeight&&d.minHeight>b.height,n=this.originalPosition.left+this.originalSize.width,p=this.position.top+this.size.height,q=/sw|nw|w/.test(e),e=/nw|ne|n/.test(e);g&&(b.width=d.minWidth);l&&(b.height=d.minHeight);c&&(b.width=d.maxWidth);f&&(b.height=d.maxHeight);g&&q&&(b.left=n-d.minWidth);c&&q&&(b.left=n-d.maxWidth);
l&&e&&(b.top=p-d.minHeight);f&&e&&(b.top=p-d.maxHeight);b.width||b.height||b.left||!b.top?b.width||b.height||b.top||!b.left||(b.left=null):b.top=null;return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var b,a,d,c,f,g=this.helper||this.element;for(b=0;b<this._proportionallyResizeElements.length;b++){f=this._proportionallyResizeElements[b];if(!this.borderDif)for(this.borderDif=[],d=[f.css("borderTopWidth"),f.css("borderRightWidth"),f.css("borderBottomWidth"),f.css("borderLeftWidth")],
c=[f.css("paddingTop"),f.css("paddingRight"),f.css("paddingBottom"),f.css("paddingLeft")],a=0;a<d.length;a++)this.borderDif[a]=(parseInt(d[a],10)||0)+(parseInt(c[a],10)||0);f.css({height:g.height()-this.borderDif[0]-this.borderDif[2]||0,width:g.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||d("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++b.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(b,a){return{width:this.originalSize.width+a}},w:function(b,a){return{left:this.originalPosition.left+a,width:this.originalSize.width-a}},n:function(b,a,d){return{top:this.originalPosition.top+d,height:this.originalSize.height-d}},s:function(b,a,d){return{height:this.originalSize.height+
d}},se:function(b,a,e){return d.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,a,e]))},sw:function(b,a,e){return d.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,a,e]))},ne:function(b,a,e){return d.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,a,e]))},nw:function(b,a,e){return d.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,a,e]))}},_propagate:function(b,a){d.ui.plugin.call(this,b,[a,this.ui()]);
"resize"!==b&&this._trigger(b,a,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});d.ui.plugin.add("resizable","animate",{stop:function(b){var a=d(this).data("ui-resizable"),e=a.options,c=a._proportionallyResizeElements,f=c.length&&/textarea/i.test(c[0].nodeName),g=f&&d.ui.hasScroll(c[0],"left")?0:a.sizeDiff.height,f=
{width:a.size.width-(f?0:a.sizeDiff.width),height:a.size.height-g},g=parseInt(a.element.css("left"),10)+(a.position.left-a.originalPosition.left)||null,l=parseInt(a.element.css("top"),10)+(a.position.top-a.originalPosition.top)||null;a.element.animate(d.extend(f,l&&g?{top:l,left:g}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var e={width:parseInt(a.element.css("width"),10),height:parseInt(a.element.css("height"),10),top:parseInt(a.element.css("top"),10),left:parseInt(a.element.css("left"),
10)};c&&c.length&&d(c[0]).css({width:e.width,height:e.height});a._updateCache(e);a._propagate("resize",b)}})}});d.ui.plugin.add("resizable","containment",{start:function(){var b,a,e,h,f,g=d(this).data("ui-resizable"),l=g.element;e=g.options.containment;if(l=e instanceof d?e.get(0):/parent/.test(e)?l.parent().get(0):e)g.containerElement=d(l),/document/.test(e)||e===document?(g.containerOffset={left:0,top:0},g.containerPosition={left:0,top:0},g.parentData={element:d(document),left:0,top:0,width:d(document).width(),
height:d(document).height()||document.body.parentNode.scrollHeight}):(b=d(l),a=[],d(["Top","Right","Left","Bottom"]).each(function(d,e){a[d]=c(b.css("padding"+e))}),g.containerOffset=b.offset(),g.containerPosition=b.position(),g.containerSize={height:b.innerHeight()-a[3],width:b.innerWidth()-a[1]},e=g.containerOffset,h=g.containerSize.height,f=g.containerSize.width,f=d.ui.hasScroll(l,"left")?l.scrollWidth:f,h=d.ui.hasScroll(l)?l.scrollHeight:h,g.parentData={element:l,left:e.left,top:e.top,width:f,
height:h})},resize:function(b){var a,e,c,f,g=d(this).data("ui-resizable");a=g.options;e=g.containerOffset;c=g.position;b=g._aspectRatio||b.shiftKey;f={top:0,left:0};var l=g.containerElement;l[0]!==document&&/static/.test(l.css("position"))&&(f=e);c.left<(g._helper?e.left:0)&&(g.size.width+=g._helper?g.position.left-e.left:g.position.left-f.left,b&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=a.helper?e.left:0);c.top<(g._helper?e.top:0)&&(g.size.height+=g._helper?g.position.top-e.top:
g.position.top,b&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?e.top:0);g.offset.left=g.parentData.left+g.position.left;g.offset.top=g.parentData.top+g.position.top;a=Math.abs(g.offset.left-f.left+g.sizeDiff.width);e=Math.abs((g._helper?g.offset.top-f.top:g.offset.top-e.top)+g.sizeDiff.height);c=g.containerElement.get(0)===g.element.parent().get(0);f=/relative|absolute/.test(g.containerElement.css("position"));c&&f&&(a-=g.parentData.left);a+g.size.width>=g.parentData.width&&
(g.size.width=g.parentData.width-a,b&&(g.size.height=g.size.width/g.aspectRatio));e+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-e,b&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var a=d(this).data("ui-resizable"),k=a.options,c=a.containerOffset,h=a.containerPosition,f=a.containerElement,g=d(a.helper),l=g.offset(),n=g.outerWidth()-a.sizeDiff.width,g=g.outerHeight()-a.sizeDiff.height;a._helper&&!k.animate&&/relative/.test(f.css("position"))&&d(this).css({left:l.left-
h.left-c.left,width:n,height:g});a._helper&&!k.animate&&/static/.test(f.css("position"))&&d(this).css({left:l.left-h.left-c.left,width:n,height:g})}});d.ui.plugin.add("resizable","alsoResize",{start:function(){var a=d(this).data("ui-resizable").options,k=function(a){d(a).each(function(){var a=d(this);a.data("ui-resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"!==typeof a.alsoResize||a.alsoResize.parentNode?
k(a.alsoResize):a.alsoResize.length?(a.alsoResize=a.alsoResize[0],k(a.alsoResize)):d.each(a.alsoResize,function(a){k(a)})},resize:function(a,k){var c=d(this).data("ui-resizable"),h=c.options,f=c.originalSize,g=c.originalPosition,l={height:c.size.height-f.height||0,width:c.size.width-f.width||0,top:c.position.top-g.top||0,left:c.position.left-g.left||0},n=function(a,b){d(a).each(function(){var a=d(this),c=d(this).data("ui-resizable-alsoresize"),e={},f=b&&b.length?b:a.parents(k.originalElement[0]).length?
["width","height"]:["width","height","top","left"];d.each(f,function(a,b){var d=(c[b]||0)+(l[b]||0);d&&0<=d&&(e[b]=d||null)});a.css(e)})};"object"!==typeof h.alsoResize||h.alsoResize.nodeType?n(h.alsoResize):d.each(h.alsoResize,function(a,b){n(a,b)})},stop:function(){d(this).removeData("resizable-alsoresize")}});d.ui.plugin.add("resizable","ghost",{start:function(){var a=d(this).data("ui-resizable"),c=a.options,e=a.size;a.ghost=a.originalElement.clone();a.ghost.css({opacity:0.25,display:"block",position:"relative",
height:e.height,width:e.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"===typeof c.ghost?c.ghost:"");a.ghost.appendTo(a.helper)},resize:function(){var a=d(this).data("ui-resizable");a.ghost&&a.ghost.css({position:"relative",height:a.size.height,width:a.size.width})},stop:function(){var a=d(this).data("ui-resizable");a.ghost&&a.helper&&a.helper.get(0).removeChild(a.ghost.get(0))}});d.ui.plugin.add("resizable","grid",{resize:function(){var a=d(this).data("ui-resizable"),
c=a.options,e=a.size,h=a.originalSize,f=a.originalPosition,g=a.axis,l="number"===typeof c.grid?[c.grid,c.grid]:c.grid,n=l[0]||1,p=l[1]||1,q=Math.round((e.width-h.width)/n)*n,e=Math.round((e.height-h.height)/p)*p,m=h.width+q,h=h.height+e,t=c.maxWidth&&c.maxWidth<m,r=c.maxHeight&&c.maxHeight<h,s=c.minWidth&&c.minWidth>m,u=c.minHeight&&c.minHeight>h;c.grid=l;s&&(m+=n);u&&(h+=p);t&&(m-=n);r&&(h-=p);/^(se|s|e)$/.test(g)?(a.size.width=m,a.size.height=h):/^(ne)$/.test(g)?(a.size.width=m,a.size.height=h,
a.position.top=f.top-e):(/^(sw)$/.test(g)?(a.size.width=m,a.size.height=h):(a.size.width=m,a.size.height=h,a.position.top=f.top-e),a.position.left=f.left-q)}})})(jQuery);
(function(d,v){d.widget("ui.selectable",d.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var c,a=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){c=d(a.options.filter,a.element[0]);c.addClass("ui-selectee");c.each(function(){var a=d(this),c=a.offset();d.data(this,"selectable-item",{element:this,$element:a,
left:c.left,top:c.top,right:c.left+a.outerWidth(),bottom:c.top+a.outerHeight(),startselected:!1,selected:a.hasClass("ui-selected"),selecting:a.hasClass("ui-selecting"),unselecting:a.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=d("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");
this._mouseDestroy()},_mouseStart:function(c){var a=this,b=this.options;this.opos=[c.pageX,c.pageY];this.options.disabled||(this.selectees=d(b.filter,this.element[0]),this._trigger("start",c),d(b.appendTo).append(this.helper),this.helper.css({left:c.pageX,top:c.pageY,width:0,height:0}),b.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var b=d.data(this,"selectable-item");b.startselected=!0;c.metaKey||c.ctrlKey||(b.$element.removeClass("ui-selected"),b.selected=!1,
b.$element.addClass("ui-unselecting"),b.unselecting=!0,a._trigger("unselecting",c,{unselecting:b.element}))}),d(c.target).parents().addBack().each(function(){var b,e=d.data(this,"selectable-item");if(e)return b=!c.metaKey&&!c.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(b?"ui-unselecting":"ui-selected").addClass(b?"ui-selecting":"ui-unselecting"),e.unselecting=!b,e.selecting=b,(e.selected=b)?a._trigger("selecting",c,{selecting:e.element}):a._trigger("unselecting",c,{unselecting:e.element}),
!1}))},_mouseDrag:function(c){this.dragged=!0;if(!this.options.disabled){var a,b=this,k=this.options,e=this.opos[0],h=this.opos[1],f=c.pageX,g=c.pageY;e>f&&(a=f,f=e,e=a);h>g&&(a=g,g=h,h=a);this.helper.css({left:e,top:h,width:f-e,height:g-h});this.selectees.each(function(){var a=d.data(this,"selectable-item"),n=!1;a&&a.element!==b.element[0]&&("touch"===k.tolerance?n=!(a.left>f||a.right<e||a.top>g||a.bottom<h):"fit"===k.tolerance&&(n=a.left>e&&a.right<f&&a.top>h&&a.bottom<g),n?(a.selected&&(a.$element.removeClass("ui-selected"),
a.selected=!1),a.unselecting&&(a.$element.removeClass("ui-unselecting"),a.unselecting=!1),a.selecting||(a.$element.addClass("ui-selecting"),a.selecting=!0,b._trigger("selecting",c,{selecting:a.element}))):(a.selecting&&((c.metaKey||c.ctrlKey)&&a.startselected?(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.$element.addClass("ui-selected"),a.selected=!0):(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.startselected&&(a.$element.addClass("ui-unselecting"),a.unselecting=!0),b._trigger("unselecting",
c,{unselecting:a.element}))),!a.selected||c.metaKey||c.ctrlKey||a.startselected||(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,b._trigger("unselecting",c,{unselecting:a.element}))))});return!1}},_mouseStop:function(c){var a=this;this.dragged=!1;d(".ui-unselecting",this.element[0]).each(function(){var b=d.data(this,"selectable-item");b.$element.removeClass("ui-unselecting");b.unselecting=!1;b.startselected=!1;a._trigger("unselected",c,{unselected:b.element})});
d(".ui-selecting",this.element[0]).each(function(){var b=d.data(this,"selectable-item");b.$element.removeClass("ui-selecting").addClass("ui-selected");b.selecting=!1;b.selected=!0;b.startselected=!0;a._trigger("selected",c,{selected:b.element})});this._trigger("stop",c);this.helper.remove();return!1}})})(jQuery);
(function(d,v){function c(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}d.widget("ui.sortable",d.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",
zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===a.axis||c(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();
for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(a,b){"disabled"===a?(this.options[a]=b,this.widget().toggleClass("ui-sortable-disabled",!!b)):d.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,b){var c=null,e=!1,h=this;if(this.reverting||this.options.disabled||"static"===this.options.type)return!1;this._refreshItems(a);d(a.target).parents().each(function(){if(d.data(this,h.widgetName+"-item")===
h)return c=d(this),!1});d.data(a.target,h.widgetName+"-item")===h&&(c=d(a.target));if(!c||this.options.handle&&!b&&(d(this.options.handle,c).find("*").addBack().each(function(){this===a.target&&(e=!0)}),!e))return!1;this.currentItem=c;this._removeCurrentsFromItems();return!0},_mouseStart:function(a,b,c){var e;b=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();
this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);
this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();b.cursor&&"auto"!==b.cursor&&(e=this.document.find("body"),this.storedCursor=e.css("cursor"),e.css("cursor",b.cursor),this.storedStylesheet=d("<style>*{ cursor: "+b.cursor+" !important; }</style>").appendTo(e));b.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),
this.helper.css("opacity",b.opacity));b.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",b.zIndex));this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("activate",a,this._uiHash(this));d.ui.ddmanager&&
(d.ui.ddmanager.current=this);d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);return!0},_mouseDrag:function(a){var b,c,e,h;b=this.options;c=!1;this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+
this.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity?this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+b.scrollSpeed:a.pageY-this.overflowOffset.top<b.scrollSensitivity&&(this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-b.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity?this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+b.scrollSpeed:a.pageX-this.overflowOffset.left<b.scrollSensitivity&&(this.scrollParent[0].scrollLeft=
c=this.scrollParent[0].scrollLeft-b.scrollSpeed)):(a.pageY-d(document).scrollTop()<b.scrollSensitivity?c=d(document).scrollTop(d(document).scrollTop()-b.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<b.scrollSensitivity&&(c=d(document).scrollTop(d(document).scrollTop()+b.scrollSpeed)),a.pageX-d(document).scrollLeft()<b.scrollSensitivity?c=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<b.scrollSensitivity&&(c=d(document).scrollLeft(d(document).scrollLeft()+
b.scrollSpeed))),!1!==c&&d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(b=this.items.length-1;0<=b;b--)if(c=this.items[b],e=c.item[0],(h=this._intersectsWithPointer(c))&&c.instance===this.currentContainer&&e!==this.currentItem[0]&&
this.placeholder[1===h?"next":"prev"]()[0]!==e&&!d.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!d.contains(this.element[0],e):1)){this.direction=1===h?"down":"up";if("pointer"===this.options.tolerance||this._intersectsWithSides(c))this._rearrange(a,c);else break;this._trigger("change",a,this._uiHash());break}this._contactContainers(a);d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(a,
b){if(a){d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var c=this,e=this.placeholder.offset(),h=this.options.axis,f={};h&&"x"!==h||(f.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));h&&"y"!==h||(f.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;d(this.helper).animate(f,parseInt(this.options.revert,
10)||500,function(){c._clear(a)})}else this._clear(a,b);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var a=this.containers.length-1;0<=a;a--)this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=
0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),d.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};
d(b).each(function(){var b=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[\-=_](.+)/);b&&c.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?b[1]:b[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};b.each(function(){c.push(d(a.item||this).attr(a.attribute||"id")||"")});return c},_intersectsWith:function(a){var b=this.positionAbs.left,d=b+this.helperProportions.width,c=this.positionAbs.top,
h=c+this.helperProportions.height,f=a.left,g=f+a.width,l=a.top,n=l+a.height,p=this.offset.click.top,q=this.offset.click.left,q="y"===this.options.axis||b+q>f&&b+q<g,p=("x"===this.options.axis||c+p>l&&c+p<n)&&q;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?p:f<b+this.helperProportions.width/2&&d-this.helperProportions.width/2<g&&l<c+this.helperProportions.height/
2&&h-this.helperProportions.height/2<n},_intersectsWithPointer:function(a){var b="y"===this.options.axis||this.positionAbs.left+this.offset.click.left>a.left&&this.positionAbs.left+this.offset.click.left<a.left+a.width;a=("x"===this.options.axis||this.positionAbs.top+this.offset.click.top>a.top&&this.positionAbs.top+this.offset.click.top<a.top+a.height)&&b;var b=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return a?this.floating?d&&"right"===d||"down"===b?2:1:b&&("down"===
b?2:1):!1},_intersectsWithSides:function(a){var b=this.positionAbs.top+this.offset.click.top>a.top+a.height/2&&this.positionAbs.top+this.offset.click.top<a.top+a.height/2+a.height;a=this.positionAbs.left+this.offset.click.left>a.left+a.width/2&&this.positionAbs.left+this.offset.click.left<a.left+a.width/2+a.width;var d=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return this.floating&&c?"right"===c&&a||"left"===c&&!a:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var a=
this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){var b,c,e,h=[],f=[],g=this._connectWith();if(g&&a)for(a=g.length-1;0<=
a;a--)for(c=d(g[a]),b=c.length-1;0<=b;b--)(e=d.data(c[b],this.widgetFullName))&&e!==this&&!e.options.disabled&&f.push([d.isFunction(e.options.items)?e.options.items.call(e.element):d(e.options.items,e.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),e]);f.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);
for(a=f.length-1;0<=a;a--)f[a][0].each(function(){h.push(this)});return d(h)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=d.grep(this.items,function(b){for(var d=0;d<a.length;d++)if(a[d]===b.item[0])return!1;return!0})},_refreshItems:function(a){this.items=[];this.containers=[this];var b,c,e,h,f,g=this.items,l=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):d(this.options.items,
this.element),this]];if((f=this._connectWith())&&this.ready)for(b=f.length-1;0<=b;b--)for(e=d(f[b]),c=e.length-1;0<=c;c--)(h=d.data(e[c],this.widgetFullName))&&h!==this&&!h.options.disabled&&(l.push([d.isFunction(h.options.items)?h.options.items.call(h.element[0],a,{item:this.currentItem}):d(h.options.items,h.element),h]),this.containers.push(h));for(b=l.length-1;0<=b;b--)for(a=l[b][1],e=l[b][0],c=0,f=e.length;c<f;c++)h=d(e[c]),h.data(this.widgetName+"-item",a),g.push({item:h,instance:a,width:0,height:0,
left:0,top:0})},refreshPositions:function(a){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var b,c,e;for(b=this.items.length-1;0<=b;b--)c=this.items[b],c.instance!==this.currentContainer&&this.currentContainer&&c.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?d(this.options.toleranceElement,c.item):c.item,a||(c.width=e.outerWidth(),c.height=e.outerHeight()),e=e.offset(),c.left=e.left,c.top=e.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(b=this.containers.length-1;0<=b;b--)e=this.containers[b].element.offset(),this.containers[b].containerCache.left=e.left,this.containers[b].containerCache.top=e.top,this.containers[b].containerCache.width=this.containers[b].element.outerWidth(),this.containers[b].containerCache.height=this.containers[b].element.outerHeight();return this},_createPlaceholder:function(a){a=a||this;var b,c=a.options;c.placeholder&&c.placeholder.constructor!==String||(b=c.placeholder,c.placeholder={element:function(){var c=
a.currentItem[0].nodeName.toLowerCase(),k=d("<"+c+">",a.document[0]).addClass(b||a.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");"tr"===c?a.currentItem.children().each(function(){d("<td>&#160;</td>",a.document[0]).attr("colspan",d(this).attr("colspan")||1).appendTo(k)}):"img"===c&&k.attr("src",a.currentItem.attr("src"));b||k.css("visibility","hidden");return k},update:function(d,h){if(!b||c.forcePlaceholderSize)h.height()||h.height(a.currentItem.innerHeight()-
parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),h.width()||h.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}});a.placeholder=d(c.placeholder.element.call(a.element,a.currentItem));a.currentItem.after(a.placeholder);c.placeholder.update(a,a.placeholder)},_contactContainers:function(a){var b,k,e,h,f,g,l,n,p,q=k=null;for(b=this.containers.length-1;0<=b;b--)d.contains(this.currentItem[0],
this.containers[b].element[0])||(this._intersectsWith(this.containers[b].containerCache)?k&&d.contains(this.containers[b].element[0],k.element[0])||(k=this.containers[b],q=b):this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",a,this._uiHash(this)),this.containers[b].containerCache.over=0));if(k)if(1===this.containers.length)this.containers[q].containerCache.over||(this.containers[q]._trigger("over",a,this._uiHash(this)),this.containers[q].containerCache.over=1);else{b=1E4;
e=null;h=(p=k.floating||c(this.currentItem))?"left":"top";f=p?"width":"height";g=this.positionAbs[h]+this.offset.click[h];for(k=this.items.length-1;0<=k;k--)d.contains(this.containers[q].element[0],this.items[k].item[0])&&this.items[k].item[0]!==this.currentItem[0]&&(!p||this.positionAbs.top+this.offset.click.top>this.items[k].top&&this.positionAbs.top+this.offset.click.top<this.items[k].top+this.items[k].height)&&(l=this.items[k].item.offset()[h],n=!1,Math.abs(l-g)>Math.abs(l+this.items[k][f]-g)&&
(n=!0,l+=this.items[k][f]),Math.abs(l-g)<b&&(b=Math.abs(l-g),e=this.items[k],this.direction=n?"up":"down"));(e||this.options.dropOnEmpty)&&this.currentContainer!==this.containers[q]&&(e?this._rearrange(a,e,null,!0):this._rearrange(a,null,this.containers[q].element,!0),this._trigger("change",a,this._uiHash()),this.containers[q]._trigger("change",a,this._uiHash(this)),this.currentContainer=this.containers[q],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[q]._trigger("over",
a,this._uiHash(this)),this.containers[q].containerCache.over=1)}},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a,this.currentItem])):"clone"===b.helper?this.currentItem.clone():this.currentItem;a.parents("body").length||d("parent"!==b.appendTo?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);a[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")});a[0].style.width&&!b.forceHelperSize||a.width(this.currentItem.width());a[0].style.height&&!b.forceHelperSize||a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){"string"===typeof a&&(a=a.split(" "));d.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in
a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&d.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&
"html"===this.offsetParent[0].tagName.toLowerCase()&&d.ui.ie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a,b,c;b=this.options;"parent"===b.containment&&(b.containment=this.helper[0].parentNode);if("document"===b.containment||"window"===b.containment)this.containment=[0-this.offset.relative.left-
this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d("document"===b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(d("document"===b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(b.containment)||(a=d(b.containment)[0],b=d(b.containment).offset(),c="hidden"!==d(a).css("overflow"),this.containment=[b.left+(parseInt(d(a).css("borderLeftWidth"),
10)||0)+(parseInt(d(a).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(d(a).css("borderTopWidth"),10)||0)+(parseInt(d(a).css("paddingTop"),10)||0)-this.margins.top,b.left+(c?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt(d(a).css("borderLeftWidth"),10)||0)-(parseInt(d(a).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(c?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt(d(a).css("borderTopWidth"),10)||0)-(parseInt(d(a).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&d.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(e[0].tagName);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:e.scrollTop())*c,left:b.left+this.offset.relative.left*
c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:e.scrollLeft())*c}},_generatePosition:function(a){var b,c,e=this.options;c=a.pageX;b=a.pageY;var h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&d.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(h[0].tagName);"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=
this._getRelativeOffset());this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(c=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(b=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.containment[2]&&(c=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(b=this.containment[3]+this.offset.click.top)),e.grid&&(b=this.originalPageY+Math.round((b-
this.originalPageY)/e.grid[1])*e.grid[1],b=this.containment?b-this.offset.click.top>=this.containment[1]&&b-this.offset.click.top<=this.containment[3]?b:b-this.offset.click.top>=this.containment[1]?b-e.grid[1]:b+e.grid[1]:b,c=this.originalPageX+Math.round((c-this.originalPageX)/e.grid[0])*e.grid[0],c=this.containment?c-this.offset.click.left>=this.containment[0]&&c-this.offset.click.left<=this.containment[2]?c:c-this.offset.click.left>=this.containment[0]?c-e.grid[0]:c+e.grid[0]:c));return{top:b-
this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:h.scrollTop()),left:c-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling);var h=this.counter=
this.counter?++this.counter:1;this._delay(function(){h===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){this.reverting=!1;var c,d=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(c in this._storedCSS)if("auto"===this._storedCSS[c]||"static"===this._storedCSS[c])this._storedCSS[c]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();
this.fromOutside&&!b&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||d.push(function(a){this._trigger("update",a,this._uiHash())});this===this.currentContainer||b||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,
this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(c=this.containers.length-1;0<=c;c--)b||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over=0);this.storedCursor&&
(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove());this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",a,this._uiHash());for(c=0;c<d.length;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1}b||this._trigger("beforeStop",a,this._uiHash());
this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!==this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(c=0;c<d.length;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===d.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||d([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,
item:b.currentItem,sender:a?a.element:null}}})})(jQuery);
